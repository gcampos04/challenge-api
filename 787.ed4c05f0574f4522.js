"use strict";(self.webpackChunkchallenge_api=self.webpackChunkchallenge_api||[]).push([[787],{787:(A,m,s)=>{s.r(m),s.d(m,{CharactersModule:()=>w});var d=s(6895),g=s(9197),c=s(5412),t=s(4650),p=s(4859),u=s(6087);function C(n,a){if(1&n&&(t.TgZ(0,"mat-list-item",7),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.title)}}function _(n,a){if(1&n&&(t.TgZ(0,"mat-list-item",7),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu("comics"===e.data.type?"Comics unavailable":"Series unavailable")}}let f=(()=>{class n{constructor(e){this.data=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal"]],decls:10,vars:4,consts:[[1,"container"],["mat-dialog-title",""],["role","list"],["role","listitem",4,"ngFor","ngForOf"],["role","listitem",4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close",""],["role","listitem"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"mat-dialog-content")(4,"mat-list",2),t.YNc(5,C,2,1,"mat-list-item",3),t.YNc(6,_,2,1,"mat-list-item",4),t.qZA()(),t.TgZ(7,"mat-dialog-actions",5)(8,"button",6),t._uU(9,"Close"),t.qZA()()()),2&e&&(t.xp6(2),t.AsE("",i.data.name," ",i.data.type," list:"),t.xp6(3),t.Q6J("ngForOf",i.data.info),t.xp6(1),t.Q6J("ngIf",0===i.data.length))},dependencies:[d.sg,d.O5,p.lW,c.ZT,c.uh,c.xY,c.H8,u.i$,u.Tg],styles:[".container[_ngcontent-%COMP%]{width:700px}"]}),n})();var v=s(5629),l=s(3546),x=s(1572);const M=["container"];function O(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"mat-card",7)(2,"div")(3,"mat-card-header",8),t._UZ(4,"img",9),t.TgZ(5,"mat-card-title",10),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-content",11)(8,"p"),t._uU(9),t.qZA()()(),t.TgZ(10,"mat-card-actions",12)(11,"button",13),t.NdJ("click",function(){const r=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(h.onOpenModalSeries(r.id,r.name))}),t._uU(12," Open list of Series "),t.qZA(),t.TgZ(13,"button",13),t.NdJ("click",function(){const r=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(h.onOpenModalComics(r.id,r.name))}),t._uU(14," Open list of Comics "),t.qZA()()()()}if(2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(4),t.hYB("src","",e.thumbnail.path,"/standard_fantastic.",e.thumbnail.extension,"",t.LSH),t.xp6(2),t.Oqu(e.name),t.xp6(3),t.hij(" ",e.description?e.description:"Description unavailable"," "),t.xp6(2),t.Q6J("disabled",i.isLoading),t.xp6(2),t.Q6J("disabled",i.isLoading)}}function b(n,a){1&n&&(t.TgZ(0,"div",14),t._UZ(1,"mat-spinner",15),t.qZA())}function Z(n,a){if(1&n&&(t.TgZ(0,"div")(1,"section")(2,"div",2,3),t.YNc(4,O,15,6,"div",4),t.qZA()(),t.YNc(5,b,2,0,"div",5),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.allCharacters),t.xp6(1),t.Q6J("ngIf",!e.searchState)}}function y(n,a){1&n&&(t.TgZ(0,"div",16),t._uU(1,"Character not found"),t.qZA())}const S=[{path:"",component:(()=>{class n{constructor(e,i){this._charactersService=e,this.dialog=i,this.offset=40,this.allCharacters=[],this.isLoading=!0,this.searchState=!1,this._charactersService.getAllCharacters(0,40)}onWindowScroll(){const i=document.documentElement.scrollHeight-this.container.nativeElement.scrollHeight;document.documentElement.scrollTop+i>=(document.documentElement.scrollHeight-725)/2&&!this._charactersService.haveRequest&&!this._charactersService.searching&&(this._charactersService.getAllCharacters(this.offset,40),this.offset+=40)}ngOnInit(){this.getCharacters()}onOpenModalSeries(e,i){this.isLoading=!0,this._charactersService.getCharacterSeries(e).subscribe(o=>{this.allSeries=o?.data?.results,this.dialog.open(f,{data:{name:i,info:this.allSeries,type:"series",length:this.allSeries.length}}),this.isLoading=!1})}onOpenModalComics(e,i){this.isLoading=!0,this._charactersService.getCharacterComics(e).subscribe(o=>{this.isLoading=!0,this.allComics=o?.data?.results,this.dialog.open(f,{data:{name:i,info:this.allComics,type:"comics",length:this.allComics.length}}),this.isLoading=!1})}getCharacters(){this._charactersService.characters$.subscribe(e=>{e&&(this.isLoading=!1,this.searchState!=this._charactersService.searching&&(this.searchState=this._charactersService.searching,this.allCharacters=[]),this._charactersService.searching?this.allCharacters=e:this.allCharacters.push(...e))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.R),t.Y36(c.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-characters-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(M,5),2&e){let o;t.iGM(o=t.CRH())&&(i.container=o.first)}},hostBindings:function(e,i){1&e&&t.NdJ("scroll",function(){return i.onWindowScroll()},!1,t.Jf7)},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["error",""],[1,"container"],["container",""],["class","row",4,"ngFor","ngForOf"],["class","loader",4,"ngIf"],[1,"row"],[1,"card"],[2,"align-items","center"],["mat-card-avatar","","onerror",'this.src="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available/standard_fantastic.jpg"',"alt","Photo of a Character","position","start",1,"card-image",3,"src"],["translate","no",1,"card-title"],[1,"card-content"],["align","end"],["mat-button","",3,"disabled","click"],[1,"loader"],["color","warn"],[1,"error-container"]],template:function(e,i){if(1&e&&(t.YNc(0,Z,6,2,"div",0),t.YNc(1,y,2,0,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.allCharacters.length>0||i.isLoading)("ngIfElse",o)}},dependencies:[d.sg,d.O5,l.a8,l.dk,l.dn,l.n5,l.hq,l.kc,p.lW,x.Ou],styles:["*[_ngcontent-%COMP%]{color:#fff}section[_ngcontent-%COMP%]{background-color:#3f3a3a;overflow:auto}.container[_ngcontent-%COMP%]{max-width:1200px;width:-moz-fit-content;width:fit-content;padding:10px 5px;margin:80px auto 0;position:relative;gap:8px;display:grid;grid-template-columns:repeat(3,1fr);justify-items:center}.card[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);display:flex;flex-direction:column;justify-content:space-between;gap:5px;width:350px;min-height:100%;background-color:#504a4a}.card-image[_ngcontent-%COMP%]{width:auto;height:70px}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;min-height:51px}.card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.mat-card-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.actions[_ngcontent-%COMP%]{align-self:center;bottom:0}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#504a4a}.loader[_ngcontent-%COMP%]{width:100%;display:inline-flex;justify-content:center}.error-container[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-items:center;font-size:xx-large}@media only screen and (max-width: 1000px){.container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width: 600px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),n})()}];let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(S),g.Bz]}),n})();var L=s(6761);let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,T,L.m]}),n})()}}]);